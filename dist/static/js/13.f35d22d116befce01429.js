webpackJsonp([13],{"9fKK":function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("TuEq"),n={name:"gis-master-map",data:function(){return{that:this,map:null,infoWindow:null,indexplaceSearch:null,MplaceSearch:null,checked:!1,mapruleradio:"prepare",mouseTool:null,maprulecolse:null,advancedInfoWindow:null,infowindowmapclick:null,marker:[]}},mounted:function(){var e=this,i=this;Object(a.a)().then(function(t){console.log("地图加载成功");var a=new t.Scale({visible:!0}),n=new t.ToolBar({visible:!0}),l=new t.OverView({visible:!0});e.map=new t.Map("container",{resizeEnable:!0,center:[125.323877,43.912301],zoom:12,isHotspot:!0}),i.map.addControl(a),i.map.addControl(n),i.map.addControl(l),i.mouseTool=new t.MouseTool(i.map);var o=new t.PlaceSearch;i.map.on("hotspotover",function(e){console.log("热点信息"),o.getDetails(e.id,function(e,a){"complete"===e&&"OK"===a.info&&!0===i.checked&&(i.infoWindow=new t.AdvancedInfoWindow({}),i.placeSearch_CallBack(a))})});var c=new t.Autocomplete({input:"tipinput"});i.indexplaceSearch=new t.PlaceSearch({}),t.event.addListener(c,"select",i.select),t.service(["AMap.PlaceSearch"],function(){i.MplaceSearch=new t.PlaceSearch({pageSize:5,pageIndex:1,city:"010",citylimit:!1,map:i.map,panel:"panel",autoFitView:!0})});i.map.on("click",function(e){console.log("您在[ "+e.lnglat.getLng()+","+e.lnglat.getLat()+" ]的位置点击了地图！");var a=new t.PlaceSearch({}),n=[e.lnglat.getLng(),e.lnglat.getLat()];a.searchNearBy("",n,200,function(e,a){var l=a.poiList.pois[0],o="<div>"+l.name+"</div><div>地址："+l.address+"</br>电话："+l.tel+"</br>类型："+l.type+"<div>";i.infowindowmapclick=new t.AdvancedInfoWindow({content:o,offset:new t.Pixel(0,-30)}),i.infowindowmapclick.open(i.map,n)})})},function(e){console.log("地图加载失败",e)})},methods:{mapclick:function(){},tipinputclick:function(){console.log("输入框被点击"),this.infowindowmapclick.close(),this.MplaceSearch.clear(),document.getElementById("panel").style.visibility="hidden"},markerclick:function(e){console.log("marker被点击")},placeSearch_CallBack:function(e){console.log("placeSearch_CallBack地点查询回调函数运行");var i=e.poiList.pois,t=i[0].location;this.infoWindow.setContent(this.createContent(i[0])),this.infoWindow.open(this.map,t)},createContent:function(e){var i=[];return i.push('<div class= "info-title">'+e.name+'</div><div class="info-content">地址：'+e.address),i.push("电话："+e.tel),i.push("类型："+e.type),i.push("<div>"),i.join("<br>")},select:function(e){this.indexplaceSearch.setCity(e.poi.adcode),this.MplaceSearch.search(e.poi.name,function(e,i){}),document.getElementById("panel").style.visibility="visible"},tipinputenter:function(){var e=document.getElementById("tipinput").value;console.log(e);this.MplaceSearch.search(e,function(e,i){}),document.getElementById("panel").style.visibility="visible"},maprule:function(){console.log("开始量算按钮被电击"),document.getElementById("mapruledev").style.visibility="visible",this.checked=!1,this.infoWindow.close(),this.mapruleradio="prepare"},mapruleclose:function(){this.mouseTool.close(!0),console.log("停止量算被点击"),document.getElementById("mapruledev").style.visibility="hidden"}},watch:{checked:function(){console.log("watch中的checkhotpot被触发"),this.infoWindow.close()},mapruleradio:function(){switch(this.mapruleradio){case"rule":this.mouseTool.rule({startMarkerOptions:{icon:new AMap.Icon({size:new AMap.Size(19,31),imageSize:new AMap.Size(19,31),image:"https://webapi.amap.com/theme/v1.3/markers/b/start.png"})},endMarkerOptions:{icon:new AMap.Icon({size:new AMap.Size(19,31),imageSize:new AMap.Size(19,31),image:"https://webapi.amap.com/theme/v1.3/markers/b/end.png"}),offset:new AMap.Pixel(-9,-31)},midMarkerOptions:{icon:new AMap.Icon({size:new AMap.Size(19,31),imageSize:new AMap.Size(19,31),image:"https://webapi.amap.com/theme/v1.3/markers/b/mid.png"}),offset:new AMap.Pixel(-9,-31)},lineOptions:{strokeStyle:"solid",strokeColor:"#FF33FF",strokeOpacity:1,strokeWeight:2}});break;case"measureArea":this.mouseTool.measureArea({strokeColor:"#80d8ff",fillColor:"#80d8ff",fillOpacity:.3})}}}},l={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"map",attrs:{id:"container"},on:{click:e.mapclick}},[t("div",{attrs:{id:"tip"}}),e._v(" "),t("div",{staticClass:"info"},[t("div",{staticClass:"input-item"},[e._m(0),e._v(" "),t("input",{attrs:{id:"tipinput",type:"text"},on:{click:e.tipinputclick,keyup:function(i){return i.type.indexOf("key")||13===i.keyCode?e.tipinputenter(i):null}}}),e._v(" "),t("el-checkbox",{attrs:{id:"checkhotpont"},model:{value:e.checked,callback:function(i){e.checked=i},expression:"checked"}},[e._v("地图热点")]),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",id:"maprule",size:"mini"},on:{click:e.maprule}},[e._v("量算")])],1)]),e._v(" "),t("div",{attrs:{id:"panel"}}),e._v(" "),t("div",{staticClass:"input-card",staticStyle:{width:"22rem"},attrs:{id:"mapruledev"}},[t("div",{staticClass:"input-item-rule"},[t("el-radio",{attrs:{label:"prepare"},model:{value:e.mapruleradio,callback:function(i){e.mapruleradio=i},expression:"mapruleradio"}},[e._v("脑洞测量")]),e._v(" "),t("el-radio",{attrs:{label:"rule"},model:{value:e.mapruleradio,callback:function(i){e.mapruleradio=i},expression:"mapruleradio"}},[e._v("距离测量")]),e._v(" "),t("el-radio",{attrs:{label:"measureArea"},model:{value:e.mapruleradio,callback:function(i){e.mapruleradio=i},expression:"mapruleradio"}},[e._v("面积测量")])],1),e._v(" "),t("div",{staticClass:"input-item-rule-button"},[t("el-button",{staticClass:"btn",attrs:{type:"danger",size:"mini"},on:{click:e.mapruleclose},model:{value:e.mapruleclose,callback:function(i){e.mapruleclose=i},expression:"mapruleclose"}},[e._v("停止量算")])],1)])])},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"input-item-prepend"},[i("span",{staticClass:"input-item-text",staticStyle:{width:"5rem"}},[this._v("请输入关键字")])])}]};var o=t("VU/8")(n,l,!1,function(e){t("yRO4")},"data-v-6569072b",null);i.default=o.exports},yRO4:function(e,i){}});
//# sourceMappingURL=13.f35d22d116befce01429.js.map