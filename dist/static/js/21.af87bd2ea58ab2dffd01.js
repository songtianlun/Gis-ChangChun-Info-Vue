webpackJsonp([21],{G40Q:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("tvR6"),r("QN78");var o=r("nrd6"),a=r.n(o),n=(r("0J91"),{name:"gis-information-map",data:function(){return{heatmapLayer:null,map:null,baseLayers:null,overlays:null,layerControl:null,scenicmapmarkers:null,nation_2016_geology:null,nation_2016_woods:null,nature_2016:null}},mounted:function(){this.initmap(),this.addscenicmap(),this.addnation_2016_geology(),this.addnation_2016_woods(),this.addnation_2016(),this.layercontrol(),this.firstmessage()},methods:{initmap:function(){var e=a.a.tileLayer.chinaProvider("GaoDe.Normal.Map",{attribution:"Haut-Gis-Org © 高德地图",minZoom:4}),t=a.a.tileLayer.chinaProvider("GaoDe.Satellite.Map",{attribution:"Haut-Gis-Org © 高德地图"}),r=a.a.tileLayer.chinaProvider("GaoDe.Satellite.Annotion",{attribution:"Haut-Gis-Org © 高德地图"}),o=a.a.layerGroup([t,r]),n=a.a.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Haut-Gis-Org © OpenStreetMap"});this.baseLayers={"高德地图":e,"高德影像":o,OpenStreetMap:n},this.map=a.a.map("map",{center:[43.912301,125.323877],zoom:4,layers:[e]}),a.a.control.scale({maxWidth:200,metric:!0,imperial:!1}).addTo(this.map)},addscenicmap:function(){var e=this,t=this;this.scenicmapmarkers=a.a.markerClusterGroup(),this.$http.get("/api/scenicdata").then(function(r){console.log(r);for(var o=r.data.features,n=0,i=function(){var r=o[n],i="【"+r.properties.名称+"】",s="类型：2017年国家级风景名胜</br>全称："+r.properties.全称+"</br>省份："+r.properties.省份+"</br>总面积："+r.properties.总面积+"平方公里</br>游览面积："+r.properties.游览面+"平方公里</br>2017游览量："+r.properties.游人量+"万人次</br>境外游人量："+r.properties.境外游+"万人次</br>固定资产投资完成额："+r.properties.固定资+"万元</br>国家拨款："+r.properties.国家拨+"万元</br>景区资金收入合计："+r.properties.景区资+"万元</br>景区资金支出合计："+r.properties.景区资_+"万元</br>经营收入："+r.properties.经营收+"万元</br>经营支出："+r.properties.经营支+"万元</br>维护支出："+r.properties.维护支+"万元</br>门票收入："+r.properties.门票收+"万元</br>注：数据0表示统计信息暂缺</br>",p=a.a.marker(new a.a.LatLng(r.geometry.coordinates[1],r.geometry.coordinates[0]),{title:""});p.on("click",function(e){console.log(e),t.openmessage(i,s)}),e.scenicmapmarkers.addLayer(p),n++};o[n];)i();e.scenicmapmarkers.addTo(e.map)},function(e){console.log("数据加载失败")})},addnation_2016_geology:function(){var e=this;this.nation_2016_geology=a.a.markerClusterGroup(),this.$http.get("/api/nation_2016_geology").then(function(t){console.log(t);for(var r=t.data.features,o=0,n=function(){var t=r[o],n="【"+t.properties.name+"】",i="类型：2016年国家级地址公园</br>主要地质景观："+t.properties.主要地+"</br>主要人文景观："+t.properties.主要人+"</br>首次设立时间："+t.properties.time+"</br>批次：第"+t.properties.批次+"批次</br>序号："+t.properties.序号+"</br>注：数据为空表示该数据暂缺</br>",s=a.a.marker(new a.a.LatLng(t.geometry.coordinates[1],t.geometry.coordinates[0]),{title:""});s.on("click",function(t){console.log(t),e.openmessage(n,i)}),e.nation_2016_geology.addLayer(s),o++};r[o];)n();e.layerControl.addOverlay(e.nation_2016_geology,"2016年国家级地质公园")},function(e){console.log("数据加载失败")})},addnation_2016_woods:function(){var e=this;this.nation_2016_woods=a.a.markerClusterGroup(),this.$http.get("/api/nation_2016_woods").then(function(t){console.log(t);for(var r=t.data.features,o=0,n=function(){var t=r[o],n="【"+t.properties.name_short+"】",i="全称："+t.properties.name+"</br>类型：2016年国家级森林公园</br>面积："+t.properties.area_ha+"平方公里</br>所在省份："+t.properties.Province+"</br>监管方："+t.properties.manager+"</br>所在地：第"+t.properties.county+"</br>首次设立时间："+t.properties.time+"</br>注：数据为空表示该数据暂缺</br>",s=a.a.marker(new a.a.LatLng(t.geometry.coordinates[1],t.geometry.coordinates[0]),{title:""});s.on("click",function(t){console.log(t),e.openmessage(n,i)}),e.nation_2016_woods.addLayer(s),o++};r[o];)n();e.layerControl.addOverlay(e.nation_2016_woods,"2016年国家级森林公园")},function(e){console.log("数据加载失败")})},addnation_2016:function(){var e=this;this.nation_2016=a.a.markerClusterGroup(),this.$http.get("/api/nature_2016_protect").then(function(t){console.log(t);for(var r=t.data.features,o=0,n=function(){var t=r[o],n="【"+t.properties.name+"】",i="类型：2016年国家级自然保护区</br>面积："+t.properties.area+"平方公里</br>所在省份："+t.properties.Province+"</br>所属部门："+t.properties.apartment+"</br>编码："+t.properties.code+"</br>所在地："+t.properties.county+"</br>类型："+t.properties.object+"</br>首次设立时间："+t.properties.time+"</br>保护对象："+t.properties.type+"</br>注：数据为空表示该数据暂缺</br>",s=a.a.marker(new a.a.LatLng(t.geometry.coordinates[1],t.geometry.coordinates[0]),{title:""});s.on("click",function(t){console.log(t),e.openmessage(n,i)}),e.nation_2016.addLayer(s),o++};r[o];)n();e.layerControl.addOverlay(e.nation_2016,"2016年国家级自然保护区")},function(e){console.log("数据加载失败")})},layercontrol:function(){this.overlays={"2017国家级风景名胜区":this.scenicmapmarkers},this.layerControl=a.a.control.layers(this.baseLayers,this.overlays).addTo(this.map)},openmessage:function(e,t){var r=this;this.$confirm(t,e,{confirmButtonText:"前往",cancelButtonText:"继续",type:"warning",center:!0,dangerouslyUseHTMLString:!0}).then(function(){r.$message({type:"success",message:"正在前往!"})}).catch(function(){r.$message({type:"info",message:"继续查看"})})},firstmessage:function(){var e=this;e.$confirm("请使用右上角图层按钮切换信息源，当前地图标记信息为：2017年国家级风景名胜区","温馨提示",{confirmButtonText:"知道啦！",cancelButtonText:"返回首页",type:"warning",center:!0}).then(function(){e.$message({type:"success",message:"地图查看!"}).catch(function(){e.$message({type:"info",message:"前往首页"}),e.$router.push({path:"/gis-master-map"})})})}}}),i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticStyle:{margin:"0 auto",width:"100%",height:"100%","z-index":"999"},attrs:{id:"map"}})},staticRenderFns:[]};var s=r("VU/8")(n,i,!1,function(e){r("MGw2")},null,null);t.default=s.exports},MGw2:function(e,t){}});
//# sourceMappingURL=21.af87bd2ea58ab2dffd01.js.map